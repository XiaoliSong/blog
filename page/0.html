<html>
 <head>
  <title>
   Xiaoli Song
  </title>
  <meta content="Xiaoli Song" name="keywords"/>
  <meta content="导航页, 第0页" name="description"/>
  <meta charset="utf-8"/>
  <meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" name="viewport"/>
  <link href="https://blog-1252791686.cos.ap-beijing.myqcloud.com/css/global.css" rel="stylesheet" type="text/css"/>
  <link href="https://blog-1252791686.cos.ap-beijing.myqcloud.com/css/md.css" rel="stylesheet" type="text/css"/>
  <link href="https://blog-1252791686.cos.ap-beijing.myqcloud.com/css/article.css" rel="stylesheet" type="text/css"/>
  <link href="https://blog-1252791686.cos.ap-beijing.myqcloud.com/css/page.css" rel="stylesheet" type="text/css"/>
 </head>
 <body>
  <div id="header">
   <button id="switch_btn">
   </button>
   <a href="/about.html" title="关于">
    <img alt="关于" src="https://blog-1252791686.cos.ap-beijing.myqcloud.com/icon/logo.png"/>
   </a>
   <h1>
    Xiaoli Song
   </h1>
  </div>
  <nav id="sidebar">
   <div id="profile">
    <a href="/" title="Xiaoli Song">
     <img alt="Xiaoli Song" src="https://blog-1252791686.cosbj.myqcloud.com/icon/logo.png"/>
    </a>
    <span>
     Xiaoli Song
    </span>
   </div>
   <ul id="row_links">
    <li>
     <a href="/index.html">
      <img alt="首页" src="https://blog-1252791686.cosbj.myqcloud.com/icon/home.png"/>
      <span>
       首页
      </span>
     </a>
    </li>
    <li>
     <a href="/archive.html">
      <img alt="归档" src="https://blog-1252791686.cosbj.myqcloud.com/icon/archives.png"/>
      <span>
       归档
      </span>
     </a>
    </li>
    <li>
     <a href="/tag.html">
      <img alt="标签" src="https://blog-1252791686.cosbj.myqcloud.com/icon/tags.png"/>
      <span>
       标签
      </span>
     </a>
    </li>
    <li>
     <a href="/works.html">
      <img alt="作品" src="https://blog-1252791686.cosbj.myqcloud.com/icon/works.png"/>
      <span>
       作品
      </span>
     </a>
    </li>
    <li>
     <a href="/recommend.html">
      <img alt="推荐" src="https://blog-1252791686.cosbj.myqcloud.com/icon/recommend.png"/>
      <span>
       推荐
      </span>
     </a>
    </li>
    <li>
     <a href="/about.html">
      <img alt="关于" src="https://blog-1252791686.cosbj.myqcloud.com/icon/about.png"/>
      <span>
       关于
      </span>
     </a>
    </li>
    <li>
     <a href="/friends.html">
      <img alt="友链" src="https://blog-1252791686.cosbj.myqcloud.com/icon/friends.png"/>
      <span>
       友链
      </span>
     </a>
    </li>
   </ul>
   <ul id="col_links">
    <li>
     <a href="https://github.com/XiaoliSong/">
      <img alt="GitHub" src="https://blog-1252791686.cosbj.myqcloud.com/icon/github.png"/>
     </a>
    </li>
    <li>
     <a href="/search.html">
      <img alt="Search" src="https://blog-1252791686.cosbj.myqcloud.com/icon/search.png"/>
     </a>
    </li>
    <li>
     <a href="/rss.xml">
      <img alt="RSS" src="https://blog-1252791686.cosbj.myqcloud.com/icon/rss.png"/>
     </a>
    </li>
   </ul>
  </nav>
  <div id="main">
   <div class="md" id="content">
    <ul class="post_catlog">
     <li>
      <article class="post">
       <div class="post_meta">
        <div class="post_meta_date">
         2018-09-20
        </div>
        <div class="post_commet_cnt">
         <a href="/post/use_of_crontab_flock_timeout/index.html#SOHUCS">
          <span class="cy_cmt_count" id="sourceId::use_of_crontab_flock_timeout">
          </span>
          <span>
           评论
          </span>
         </a>
        </div>
       </div>
       <h1>
        <a href="/post/use_of_crontab_flock_timeout/index.html" title="crontab、flock、timeout的配合使用实现定时任务超时及报警">
         crontab、flock、timeout的配合使用实现定时任务超时及报警
        </a>
       </h1>
       <h2 id="_1">
        需求场景
       </h2>
       <p>
        开发后台的同学，经常需要写一些脚本定时启动运行，通常使用crontab来实现。有时候还有更加苛刻的需求：脚本不仅需要定时启动，而且还需要保证互斥
（同一时间只有一个进程在跑，上次的没结束则这次不启动）的要求，甚至还需要设置超时时间（当运行时间过长自动结束进程）和超时报警。那又该如何实现呢？答案是：crontab定时启动任务，flock保证互斥，timeout设置超时以及报警脚本
       </p>
      </article>
     </li>
     <li>
      <article class="post">
       <div class="post_meta">
        <div class="post_meta_date">
         2018-09-08
        </div>
        <div class="post_commet_cnt">
         <a href="/post/how_to_load_common_modules_in_python/index.html#SOHUCS">
          <span class="cy_cmt_count" id="sourceId::how_to_load_common_modules_in_python">
          </span>
          <span>
           评论
          </span>
         </a>
        </div>
       </div>
       <h1>
        <a href="/post/how_to_load_common_modules_in_python/index.html" title="Python不同项目加载公共模块">
         Python不同项目加载公共模块
        </a>
       </h1>
       <h2 id="_1">
        需求场景
       </h2>
       <p>
        开发一个web项目项目时，不仅需要一个网站的后台服务，通常还需要开发相应的管理后台（如CMS、CRM）。因此可以它拆成两个项目进行分别进行开发，也可以放在一起合成一个项目开发。如果拆分成两个项目的话，大部分代码其实是类似的，两个项目的更新需要进行同步，比较麻烦且容易出错。所以，针对这个问题，我的做法是拆分成三个项目，分别是公共项目、网站后台、管理后台。
       </p>
       <p>
        分成三个项目，公共项目是其他两个项目的依赖，后两个项目导致加载模块时引入公共项目的模块。可以采用直接把文件复制过去，但略显麻烦，有没有更好的办法呢？
       </p>
      </article>
     </li>
     <li>
      <article class="post">
       <div class="post_meta">
        <div class="post_meta_date">
         2018-09-08
        </div>
        <div class="post_commet_cnt">
         <a href="/post/how_to_import_dynamic_css_file_before_rendering/index.html#SOHUCS">
          <span class="cy_cmt_count" id="sourceId::how_to_import_dynamic_css_file_before_rendering">
          </span>
          <span>
           评论
          </span>
         </a>
        </div>
       </div>
       <h1>
        <a href="/post/how_to_import_dynamic_css_file_before_rendering/index.html" title="如何在页面渲染前加入动态的CSS的文件">
         如何在页面渲染前加入动态的CSS的文件
        </a>
       </h1>
       <h2 id="css">
        页面渲染前加入动态的CSS的文件？
       </h2>
       <p>
        这是我自己的说法，可能不大对。主要描述的是这样的场景：
       </p>
       <ul>
        <li>
         css文件url的前缀可能经常变化（比如换对象存储的提供商、需要做迁移）
        </li>
        <li>
         我们希望在渲染前完成css样式文件的加载
        </li>
       </ul>
       <p>
        所以我的方案场景代码是这样的：
       </p>
       <div class="codehilite">
        <pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">class</span><span class="o">=</span><span class="s">"remoteCss"</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="na">tempHref</span><span class="o">=</span><span class="s">"/css/global.css"</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"main"</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre>
       </div>
       <p>
        希望，能够在页面渲染前完成样式文件的引入。css文件url前缀可能为http://baidu.com或者其他。目前我没有搜索到相关的解决方案。
       </p>
      </article>
     </li>
    </ul>
    <script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cytyIIWkH">
    </script>
    <nav class="pagination">
     <a class="former_link" href="#" visibility="hiddern">
     </a>
     <a class="next_link" href="#" visibility="hiddern">
     </a>
     <a class="center_link" href="/archive.html">
      -归档-
     </a>
    </nav>
   </div>
   <footer>
    Xiaoli Song -
    <a href="http://xiaolisong.cn" title="Xiaoli Song">
     xiaolisong.cn
    </a>
   </footer>
  </div>
  <script src="https://blog-1252791686.cos.ap-beijing.myqcloud.com/js/global.js">
  </script>
 </body>
</html>
